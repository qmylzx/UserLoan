<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymmeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <title>Bootstrap Admin Template </title>
    <link rel="shortcut icon" href="/static/ui/img/favicon.ico">
    <!-- global stylesheets -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
    <link rel="stylesheet" href="/static/ui/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/ui/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/ui/css/font-icon-style.css">
    <link rel="stylesheet" href="/static/ui/css/style.default.css" id="theme-stylesheet">

    <!-- Core stylesheets -->
    <link rel="stylesheet" href="/static/ui/css/ui-elements/card.css">
    <link rel="stylesheet" href="/static/ui/css/style.css">
    <link rel="stylesheet" href="/static/css/button.css">
    <script src="/static/echarts/echarts.js"></script>
</head>

<body>

<!--====================================================
                         MAIN NAVBAR
======================================================-->
<header class="header">
    <nav class="navbar navbar-expand-lg ">
        <div class="container-fluid ">
            <div class="navbar-holder d-flex align-items-center justify-content-between">
                <div class="navbar-header">
                    <a href="index.html" class="navbar-brand">
                        <div class="brand-text brand-big hidden-lg-down"><img src="/static/ui/img/logo-white.png"
                                                                              alt="Logo" class="img-fluid"></div>
                        <div class="brand-text brand-small"><img src="/static/ui/img/logo-icon.png" alt="Logo"
                                                                 class="img-fluid"></div>
                    </a>
                    <a id="toggle-btn" href="#" class="menu-btn active">
                        <span></span>
                        <span></span>
                        <span></span>
                    </a>
                </div>
            </div>
            <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">

                <!-- Notifications-->
                <li class="nav-item dropdown">
                    <a id="notifications" class="nav-link" rel="nofollow" data-target="#" href="#"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i
                            class="fa fa-bell-o"></i><span class="noti-numb-bg"></span><span class="badge">12</span></a>
                    <ul aria-labelledby="notifications" class="dropdown-menu">
                        <li>
                            <a rel="nofollow" href="#" class="dropdown-item nav-link">
                                <div class="notification">
                                    <div class="notification-content"><i class="fa fa-envelope bg-red"></i>You have 6
                                        new messages
                                    </div>
                                    <div class="notification-time">
                                        <small>4 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow" href="#" class="dropdown-item nav-link">
                                <div class="notification">
                                    <div class="notification-content"><i class="fa fa-twitter bg-skyblue"></i>You have 2
                                        followers
                                    </div>
                                    <div class="notification-time">
                                        <small>4 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow" href="#" class="dropdown-item nav-link">
                                <div class="notification">
                                    <div class="notification-content"><i class="fa fa-upload bg-blue"></i>Server
                                        Rebooted
                                    </div>
                                    <div class="notification-time">
                                        <small>4 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow" href="#" class="dropdown-item nav-link">
                                <div class="notification">
                                    <div class="notification-content"><i class="fa fa-twitter bg-skyblue"></i>You have 2
                                        followers
                                    </div>
                                    <div class="notification-time">
                                        <small>10 minutes ago</small>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li><a rel="nofollow" href="#" class="dropdown-item all-notifications text-center"> <strong>view
                            all notifications </strong></a></li>
                    </ul>
                </li>
                <!-- Messages-->
                <li class="nav-item dropdown"><a id="messages" class="nav-link logout" rel="nofollow" data-target="#"
                                                 href="#" data-toggle="dropdown" aria-haspopup="true"
                                                 aria-expanded="false"><i class="fa fa-envelope-o"></i><span
                        class="noti-numb-bg"></span><span class="badge">10</span></a>
                    <ul aria-labelledby="messages" class="dropdown-menu">
                        <li>
                            <a rel="nofollow" href="#" class="dropdown-item d-flex">
                                <div class="msg-profile"><img src="/static/ui/img/avatar-1.jpg" alt="..."
                                                              class="img-fluid rounded-circle"></div>
                                <div class="msg-body">
                                    <h3 class="h5 msg-nav-h3">Jason Doe</h3><span>Sent You Message</span>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow" href="#" class="dropdown-item d-flex">
                                <div class="msg-profile"><img src="/static/ui/img/avatar-2.jpg" alt="..."
                                                              class="img-fluid rounded-circle"></div>
                                <div class="msg-body">
                                    <h3 class="h5 msg-nav-h3">Frank Williams</h3><span>Sent You Message</span>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a rel="nofollow" href="#" class="dropdown-item d-flex">
                                <div class="msg-profile"><img src="/static/ui/img/avatar-3.jpg" alt="..."
                                                              class="img-fluid rounded-circle"></div>
                                <div class="msg-body">
                                    <h3 class="h5 msg-nav-h3">Ashley Wood</h3><span>Sent You Message</span>
                                </div>
                            </a>
                        </li>
                        <li><a rel="nofollow" href="#" class="dropdown-item all-notifications text-center"> <strong>Read
                            all messages </strong></a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
</header>

<!--====================================================
                        PAGE CONTENT
======================================================-->
<div class="page-content d-flex align-items-stretch">

    <!--***** SIDE NAVBAR *****-->
    <nav class="side-navbar">
        <div class="sidebar-header d-flex align-items-center">
            <div class="avatar"><img src="/static/ui/img/avatar-1.jpg" alt="..." class="img-fluid rounded-circle"></div>
            <div class="title">
                <h1 class="h4">Steena Ben</h1>
            </div>
        </div>
        <hr>
        <!-- Sidebar Navidation Menus-->
        <ul class="list-unstyled">
            <li class="active"><a href="http://localhost:8080/user/index"><i class="icon-home"></i>主页</a></li>
            <li><a href="http://localhost:8080/user/whiteList"> <i class="fa fa-file-o"></i>白名单</a></li>
            <li><a href="http://localhost:8080/user/infoManager"> <i class="fa fa-file-o"></i>个人信息管理</a></li>
            <li><a href="http://localhost:8080/user/repay"> <i class="fa fa-file-o"></i>还款预警</a></li>
        </ul>
    </nav>
    <!--正文-->
    <div class="content-inner">
        <div style="text-align:center"><b style="font-size: 20px">用户信息展示</b></div>
        <div style="height: 350px">
            <div style="text-align:right"><button class="button button-primary button-pill button-small" onclick="showincome()">收入支出情况</button><button class="button button-primary button-pill button-small" onclick="addWhite()">加入白名单</button></div>
            <table class="table table-hover" id="table" >
                <thead>
                </thead>
                <tbody><!--数据-->
                <tr>
                    <td>用户名： <td/>
                    <td>
                        <b th:text="${session.user.id}"></b>
                    </td>
                </tr>

                <tr>
                    <td>工作： <td/>
                    <td>
                        <b th:if="${session.user.job} eq 0">国家机关事业单位人员</b>
                        <b th:if="${session.user.job} eq 1">农、林、牧、渔、水利业生产人员</b>
                        <b th:if="${session.user.job} eq 2">商业，办事，服务类人员</b>
                        <b th:if="${session.user.job} eq 3">生产、运输设备操作人员及有关人员</b>
                        <b th:if="${session.user.job} eq 4">技术从业人员</b>
                    </td>
                </tr>
                <tr>
                    <td>学历： <td/>
                    <td>
                        <b th:if="${session.user.education} eq 0">未知</b>
                        <b th:if="${session.user.education} eq 1">博士</b>
                        <b th:if="${session.user.education} eq 2">硕士</b>
                        <b th:if="${session.user.education} eq 3">本科</b>
                        <b th:if="${session.user.education} eq 4">高中/大专</b>
                    </td>
                </tr>
                <tr>
                    <td>户口类型： <td/>
                    <td>
                        <b th:if="${session.user.houseType} eq 0">未知</b>
                        <b th:if="${session.user.houseType} eq 1">农业户口</b>
                        <b th:if="${session.user.houseType} eq 2">城镇居民户口</b>
                        <b th:if="${session.user.houseType} eq 3">集体户口</b>
                        <b th:if="${session.user.houseType} eq 4">农村居民户口</b>
                    </td>
                </tr>
                <tr>
                    <td>违约概率(单位：%)： <td/>
                    <td>
                        <b th:text="${session.result}"></b>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div>
            <div style="text-align:center"><b>浏览行为记录</b></div>
            <div>
                <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
                <div id="main2" style="height:300px"></div>
                <!-- ECharts单文件引入 -->
                <script type="text/javascript" th:inline="javascript">
                    function addWhite() {//这里根据用户id跳转页面
                        var id = [[${session.userId}]];
                        console.log(id);
                        $.ajax({
                            url: window.location.protocol + "//" + window.location.host + "/user/addWhite?id=" + id,
                            type: "POST",
                            dataType: "json",
                            data: [],
                            success: function (rtn) {
                                if (rtn.code == "000000") {
                                    window.location.href = window.location.protocol + "//" + window.location.host + "/user/whiteList";
                                } else {
                                    alert(rtn.message);
                                }
                            }, error: function (rtn) {
                                console.log(rtn.message);
                            }
                        });
                    }

                    function showincome() {
                        window.location =
                            window.location.protocol + "//" + window.location.host + "/user/show/income";
                    }

                    var dataName = [];
                    var dataNumber = [];
                    var list = [[${beHaviorList}]];
                    for (var i = 0; i < list.length; i++) {
                        dataName.push(list[i].behavior);
                        dataNumber.push(list[i].count);
                    }
                    // 路径配置
                    require.config({
                        paths: {
                            echarts: '/static/echarts'
                        }
                    });
                    // 使用
                    require(
                        [
                            'echarts',
                            'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
                        ],
                        function (ec) {
                            // 基于准备好的dom，初始化echarts图表
                            var myyyChart = ec.init(document.getElementById('main2'));
                            // 指定图表的配置项和数据
                            option = {
                                xAxis: {
                                    type: 'category',
                                    data: dataName
                                },
                                yAxis: {
                                    type: 'value'
                                },
                                series: [{
                                    data: dataNumber,
                                    type: 'bar'
                                }]
                            };
                            // 为echarts对象加载数据
                            myyyChart.setOption(option);
                        }
                    );
                </script>
            </div>
        </div>
    </div>
</div>
</div>
<!--Global Javascript -->
<script src="/static/ui/js/jquery.min.js"></script>
<script src="/static/ui/js/popper/popper.min.js"></script>
<script src="/static/ui/js/tether.min.js"></script>
<script src="/static/ui/js/bootstrap.min.js"></script>
<script src="/static/ui/js/jquery.cookie.js"></script>
<script src="/static/ui/js/jquery.validate.min.js"></script>
<script src="/static/ui/js/chart.min.js"></script>
<script src="/static/ui/js/front.js"></script>
</body>
</html>